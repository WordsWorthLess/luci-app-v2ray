/**
 * @license
 * Copyright 2020 Xingwang Liao <kuoruan@gmail.com>
 *
 * Licensed to the public under the MIT License.
 */
"use strict";"require fs";"require network";"require uci";return L.Class.extend({getLocalIPs:function(){return network.getNetworks().then((function(r){for(var t=["127.0.0.1","0.0.0.0","::"],e=0,n=r;e<n.length;e++){var i=n[e],o=i.getIPAddr(),u=i.getIP6Addr();o&&(o=o.split("/")[0])&&t.indexOf(o)<0&&t.push(o),u&&(u=u.split("/")[0])&&t.indexOf(u)<0&&t.push(u)}return t.sort()}))},getSections:function(r,t){return void 0===t&&(t="alias"),uci.load("v2ray").then((function(){var e=[];return uci.sections("v2ray",r,(function(n){var i;(i=n[t])?e.push({caption:i,value:n[".name"]}):n[".name"]&&e.push({caption:r,value:n[".name"]})})),e}))},getDokodemoDoorPorts:function(){return uci.load("v2ray").then((function(){var r=[];return uci.sections("v2ray","inbound",(function(t){var e;if("dokodemo-door"==t.protocol&&(e=t.port)){var n;(n=t.alias)?r.push({caption:"%s - %s".format(n,e),value:e}):r.push({caption:"%s:%s".format(t.listen,e),value:e})}})),r}))},getXtlsSecurity:function(){return uci.load("v2ray").then((function(){var r=[];return uci.sections("v2ray","v2ray",(function(t){"Xray"==t.core&&("1"==t.reality?r.push({security:["reality|REALITY"],flow:["xtls-rprx-vision","xtls-rprx-vision-udp443"]}):r.push({security:["xtls|XTLS"],flow:["xtls-rprx-direct","xtls-rprx-direct-udp443","xtls-rprx-origin","xtls-rprx-origin-udp443","xtls-rprx-splice","xtls-rprx-splice-udp443"]}))})),r}))}});