/**
 * @license
 * Copyright 2020 Xingwang Liao <kuoruan@gmail.com>
 *
 * Licensed to the public under the MIT License.
 */
"use strict";"require form";"require uci";"require v2ray";return L.view.extend({load:function(){return v2ray.getSections("dns_server")},render:function(e){void 0===e&&(e=[]);var o,a=new form.Map("v2ray","%s - %s".format(uci.get("v2ray","main","core"),_("DNS")),_("Details: %s").format('<a href="https://xtls.github.io/en/config/dns.html#dnsobject" target="_blank">DnsObject</a>')),r=a.section(form.NamedSection,"main_dns","dns");r.anonymous=!0,r.addremove=!1,(o=r.option(form.Flag,"enabled",_("Enabled"))).rmempty=!1,(o=r.option(form.Value,"tag",_("Tag"))).rmempty=!1,(o=r.option(form.Value,"client_ip",_("Client IP"),'<a href="https://icanhazip.com" target="_blank">%s</a>'.format(_("Get my public IP address")))).datatype="ipaddr",o=r.option(form.DynamicList,"hosts",_("Hosts"),_("Host and domain mapping</br>format: <code>domain|ip1,ip2</code> or <code>domain-A|domain-B</code> eg: </br>%s or %s").format("<code>dns.google|8.8.8.8,8.8.4.4</code>","<code>google.cn|google.com</code>")),(o=r.option(form.ListValue,"query_strategy",_("Domain Strategy"))).value("UseIP"),o.value("UseIPv4"),o.value("UseIPv6"),(o=r.option(form.ListValue,"disable_cache",_("Disable DNS Cache"))).value("0",_("False")),o.value("1",_("True")),(o=r.option(form.ListValue,"disable_fallback",_("Disable Fallback Query"))).value("0",_("False")),o.value("1",_("True")),(o=r.option(form.ListValue,"disable_fallback_if_match",_("Disable Fallback if got Matches"))).value("0",_("False")),o.value("1",_("True")),o=r.option(form.MultiValue,"servers",_("DNS Servers"),_("Select DNS servers to use</br><code>Only 1 fakedns configuration can be enabled at the same time,prioritized by order</code>"));for(var s=0,t=e;s<t.length;s++){var d=t[s];o.value(d.value,d.caption)}var n=a.section(form.GridSection,"dns_server",_("DNS server"),_("Add DNS servers here"));return n.anonymous=!1,n.addremove=!0,n.nodescription=!0,n.sortable=!0,(o=n.option(form.Value,"alias",_("Alias"))).rmempty=!1,(o=n.option(form.ListValue,"dns_server_type",_("Type"))).value("DoH"),o.value("fakedns"),o.value("localhost"),o.value("QUIC"),o.value("TCP"),o.value("UDP"),(o=n.option(form.ListValue,"doh_provider","DoH Provider")).modalonly=!0,o.depends("dns_server_type","DoH"),o.value("8.8.8.8","Google"),o.value("1.1.1.1","Cloudflare"),o.value("dns.adguard-dns.com","adGuard"),(o=n.option(form.Value,"address",_("Address"))).depends("dns_server_type","QUIC"),o.depends("dns_server_type","TCP"),o.depends("dns_server_type","UDP"),(o=n.option(form.Value,"port",_("Port"))).depends("dns_server_type","TCP"),o.depends("dns_server_type","UDP"),o.depends("dns_server_type","QUIC"),o.modalonly=!0,o.datatype="port",o.placeholder="53",(o=n.option(form.Flag,"local_mode",_("Local Mode"),_("DNS Query through <code>Freedom</code> outbound"))).modalonly=!0,o.depends("dns_server_type","DoH"),o.depends("dns_server_type","TCP"),o.depends("dns_server_type","QUIC"),(o=n.option(form.DynamicList,"domains",_("Domains"))).modalonly=!0,(o=n.option(form.DynamicList,"expect_ips",_("Expect IPs"))).modalonly=!0,(o=n.option(form.ListValue,"skip_fallback",_("Skip Fallback"))).modalonly=!0,o.value(""),o.value("0",_("False")),o.value("1",_("True")),(o=n.option(form.Value,"client_ip",_("Client IP"))).modalonly=!0,o.datatype="ipaddr",a.render()}});