/**
 * @license
 * Copyright 2020 Xingwang Liao <kuoruan@gmail.com>
 *
 * Licensed to the public under the MIT License.
 */
"use strict";"require fs";"require network";"require uci";return L.Class.extend({getLocalIPs:function(){return network.getNetworks().then((function(r){for(var t=["127.0.0.1","0.0.0.0","::"],n=0,e=r;n<e.length;n++){var i=e[n],o=i.getIPAddr(),u=i.getIP6Addr();o&&(o=o.split("/")[0])&&t.indexOf(o)<0&&t.push(o),u&&(u=u.split("/")[0])&&t.indexOf(u)<0&&t.push(u)}return t.sort()}))},getSections:function(r,t){return void 0===t&&(t="alias"),uci.load("v2ray").then((function(){var n=[];return uci.sections("v2ray",r,(function(r){var e;(e=r[t])?n.push({caption:e,value:r[".name"]}):n.push({caption:"no_alias",value:r[".name"]})})),n}))},getDokodemoDoorPorts:function(){return uci.load("v2ray").then((function(){var r=[];return uci.sections("v2ray","inbound",(function(t){var n;if("dokodemo-door"==t.protocol&&(n=t.port)){var e;(e=t.alias)?r.push({caption:"%s - %s".format(e,n),value:n}):r.push({caption:"%s:%s".format(t.listen,n),value:n})}})),r}))},getXtlsSecurity:function(){return uci.load("v2ray").then((function(){var r=[];return uci.sections("v2ray","v2ray",(function(t){"Xray"==t.core&&("1"==t.reality?r.push({security:["reality|REALITY"],flow:["xtls-rprx-vision","xtls-rprx-vision-udp443"]}):r.push({security:["xtls|XTLS"],flow:["xtls-rprx-direct","xtls-rprx-direct-udp443","xtls-rprx-origin","xtls-rprx-origin-udp443","xtls-rprx-splice","xtls-rprx-splice-udp443"]}))})),r}))}});