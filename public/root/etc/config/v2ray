
config v2ray 'main'
	option asset_location '/usr/share/v2ray'
	option mem_percentage '0'
	option loglevel 'warning'
	option access_log '/dev/null'
	option error_log '/dev/null'
	list inbounds 'socks_proxy'
	list inbounds 'dokodemo_door'
	list outbounds 'direct'
	list outbounds 'block'
	list outbounds 'dns_out'
	list outbounds 'proxy_reality'
	list outbounds 'proxy_trojan'
	list outbounds 'proxy_grpc'
	option v2ray_file '/usr/bin/xray'
	option enabled '0'

config dns 'main_dns'
	option enabled '1'
	option tag 'xray_dns'
	option alias 'dns'
	option query_strategy 'UseIP'
	list hosts 'vps.reality|1.2.3.4'
	list hosts 'vps.trojan|2.3.4.5'
	list hosts 'vps.grpc|3.4.5.6'
	list hosts '114.dns|114.114.114.114'
	list hosts 'my.router|192.168.1.1,::1'
	list hosts 'google.cn|google.com'
	option disable_cache '0'
	option disable_fallback '0'
	option disable_fallback_if_match '0'
	list servers 'cloudflare'
	list servers 'fakedns'
	list servers 'dns_google'
	list servers 'dns114'

config dns_server 'cloudflare'
	option alias 'one.one.one.one'
	option dns_server_type 'DoH'
	option local_mode '1'
	option doh_provider '1.1.1.1'

config dns_server 'fakedns'
	option alias 'fakedns'
	option dns_server_type 'fakedns'
	option skip_fallback 'true'
	list domains 'geosite:tiktok'

config dns_server 'dns_google'
	option alias 'dns.Google'
	option dns_server_type 'UDP'
	option skip_fallback 'false'
	option address '8.8.8.8'
	list domains 'geosite:geolocation-!cn'

config dns_server 'dns114'
	option alias 'dns.114'
	option dns_server_type 'UDP'
	option address '114.114.114.114'
	option port '53'
	list domains 'geosite:cn'
	option expect_ips 'geoip:cn'

config routing 'main_routing'
	option enabled '1'
	option main_domain_matcher 'hybrid'
	option domain_strategy 'AsIs'
	list rules 'direct_speedtest'
	list rules 'direct_bt'
	list rules 'direct_ntp'
	list rules 'route_dns'
	list rules 'proxy_dns'
	list rules 'block_ad'
	list rules 'anti_censorship'
	list rules 'netflix_domains'
	list rules 'netflix_ips'
	list rules 'telegram_ips'
	list rules 'socks_in'
	list rules 'direct_cn_domains'
	list rules 'direct_cn_ips'

config routing_rule 'direct_speedtest'
	option domain_matcher 'hybrid'
	option type 'field'
	option alias '直连SpeedTest'
	list domain 'geosite:speedtest'
	list domain 'domain:whoer.net'
	list domain 'domain:whrq.net'
	option outbound_tag 'direct'

config routing_rule 'direct_bt'
	option domain_matcher 'hybrid'
	option type 'field'
	option alias '直连BT流量'
	list protocol 'bittorrent'
	option outbound_tag 'direct'

config routing_rule 'direct_ntp'
	option domain_matcher 'hybrid'
	option type 'field'
	list network 'udp'
	list port '123'
	option outbound_tag 'direct'
	option alias '直连NTP授时服务'

config routing_rule 'route_dns'
	option domain_matcher 'hybrid'
	option type 'field'
	option outbound_tag 'dns_out'
	option alias '挟持DNS'
	list inbound_tag 'socks_proxy'
	list inbound_tag 'transparent'
	list port '53'

config routing_rule 'proxy_dns'
	option alias '代理国外DNS查询'
	option type 'field'
	list ip '1.1.1.1'
	list ip '8.8.8.8'
	list ip '208.67.222.222'
	option outbound_tag 'reality'

config routing_rule 'block_ad'
	option alias '拦截广告'
	option type 'field'
	option domain_matcher 'hybrid'
	list domain 'geosite:category-ads-all'
	option outbound_tag 'block'

config routing_rule 'anti_censorship'
	option domain_matcher 'hybrid'
	option type 'field'
	option alias '反审查'
	list domain 'geosite:apkpure'
	list domain 'geosite:blogspot'
	list domain 'geosite:facebook'
	list domain 'geosite:github'
	list domain 'geosite:google'
	list domain 'geosite:paypal'
	list domain 'geosite:rarbg'
	list domain 'geosite:telegram'
	list domain 'geosite:twitter'
	list domain 'geosite:reddit'
	list domain 'domain:wikipedia.org'
	list domain 'domain:racknerd.com'
	list domain 'domain:free-proxy.cz'
	list domain 'domain:archive.org'
	list domain 'geosite:category-media'
	list domain 'domain:time.com'
	list domain 'domain:v2fly.org'
	list domain 'full:www.msftconnecttest.com'
	list domain 'geosite:vultr'
	list domain 'domain:debian.org'
	list domain 'domain:v2ex.com'
	list domain 'geosite:duckduckgo'
	list domain 'geosite:dropbox'
	list domain 'domain:hostloc.com'
	option outbound_tag 'trojan'

config routing_rule 'netflix_domains'
	option domain_matcher 'hybrid'
	option type 'field'
	option alias '代理Netflix域名'
	list domain 'geosite:netflix'
	option outbound_tag 'reality'

config routing_rule 'netflix_ips'
	option domain_matcher 'hybrid'
	option type 'field'
	option alias '代理Netflix IP'
	list domain 'geoip:netflix'
	option outbound_tag 'reality'

config routing_rule 'telegram_ips'
	option domain_matcher 'hybrid'
	option type 'field'
	option alias '代理telegram IP'
	list domain 'geoip:telegram'
	option outbound_tag 'trojan'

config routing_rule 'socks_in'
	option domain_matcher 'hybrid'
	option type 'field'
	option alias 'Socks 代理'
	list inbound_tag 'socks_proxy'
	option outbound_tag 'reality'

config routing_rule 'direct_cn_domains'
	option domain_matcher 'hybrid'
	option type 'field'
	option alias '直连国内网站'
	list domain 'geosite:cn'
	option outbound_tag 'direct'

config routing_rule 'direct_cn_ips'
	option domain_matcher 'hybrid'
	option type 'field'
	option alias '直连国内IP'
	list domain 'geoip:cn'
	option outbound_tag 'direct'

config routing_balancer 'routing_balancer_1'
	option tag 'balancer'
	list selector 'a'
	list selector 'ab'

config policy 'main_policy'
	option enabled '0'

config policy_level 'policy_level_0'
	option level '0'
	option handshake '4'
	option conn_idle '300'
	option uplink_only '2'
	option downlink_only '5'
	option buffer_size '0'

config reverse 'main_reverse'
	option enabled '0'
	option alias 'reverse_proxy'
	list bridges 'bridge|test.v2ray.com'
	list portals 'portal|test.v2ray.com'

config inbound 'socks_proxy'
	option alias 'socks代理'
	option port '1080'
	option protocol 'socks'
	option s_socks_auth 'noauth'
	option s_socks_udp '1'
	option s_socks_ip '127.0.0.1'
	option sniffing_enabled '1'
	option tag 'socks_proxy'
	list sniffing_dest_override 'http'
	list sniffing_dest_override 'tls'
	option metadata_only '1'

config inbound 'dokodemo_door'
	option port '1081'
	option alias '任意门'
	option protocol 'dokodemo-door'
	option sniffing_enabled '1'
	list s_dokodemo_door_network 'tcp'
	list s_dokodemo_door_network 'udp'
	option s_dokodemo_door_follow_redirect '1'
	option tag 'transparent'
	list sniffing_dest_override 'fakedns'
	list sniffing_dest_override 'http'
	list sniffing_dest_override 'tls'
	option metadata_only 'false'
	option route_only '0'

config outbound 'direct'
	option protocol 'freedom'
	option tag 'direct'
	option alias '直连'

config outbound 'block'
	option protocol 'blackhole'
	option tag 'block'
	option alias '封锁'

config outbound 'dns_out'
	option protocol 'dns'
	option tag 'dns_out'
	option alias 'DNS分流'

config outbound 'proxy_reality'
	option protocol 'vless'
	option s_vless_port '443'
	option s_vless_user_id 'f3236542-71d2-4a51-83e0-eb7249713833'
	option s_vless_user_encryption 'none'
	option ss_sockopt_domain_strategy 'AsIs'
	option tag 'reality'
	option alias 'XRAY TCP REALITY'
	option ss_reality_public_key 'izSu-O9GMk5D1pZ-43BHRb-nuCEcl6FGBBq1Gqcz-yA'
	option ss_reality_short_id '119ad18144c5e2c8'
	option ss_reality_server_name 'www.microsoft.com'
	option ss_reality_show 'true'
	option ss_reality_spiderx '/zh-hk/login'
	option s_vless_address '1.2.3.4'
	option ss_security 'reality'
	option ss_reality_fingerprint 'edge'
	option s_xtls_flow 'xtls-rprx-vision'
	option ss_network 'tcp'

config outbound 'proxy_trojan'
	option ss_network 'ws'
	option protocol 'trojan'
	option s_trojan_address '2.3.4.5'
	option s_trojan_port '443'
	option s_trojan_password 'trojan_password'
	option ss_sockopt_domain_strategy 'AsIs'
	list ss_tls_alpn 'http/1.1'
	option ss_websocket_path '/ws_path'
	option ss_security 'tls'
	option alias 'Trojan WebSocket CDN'
	option tag 'trojan'

config outbound 'proxy_grpc'
	option alias 'VLESS gRPC'
	option protocol 'vless'
	option s_vless_address '3.4.5.6'
	option s_vless_port '443'
	option s_vless_user_id 'd990da61-6948-4082-b0a6-cea9353ea535'
	option s_vless_user_encryption 'none'
	option ss_network 'grpc'
	option ss_security 'tls'
	list ss_tls_alpn 'h2'
	option ss_grpc_service_name 'Service_Name'
	option ss_grpc_permit_without_stream 'true'
	option ss_grpc_idle_timeout '10'
	option ss_grpc_health_check_timeout '20'
	option ss_grpc_initial_windows_size '0'
	option tag 'grpc'
	option ss_grpc_multi_mode 'true'
	option ss_sockopt_domain_strategy 'AsIs'

config transparent_proxy 'main_transparent_proxy'
	option apnic_delegated_mirror 'apnic'
	option redirect_port '1081'
	list lan_ifaces 'lan'
	option gfwlist_mirror 'github'
	option redirect_udp '1'
	option use_tproxy '1'
	option proxy_mode 'default'

